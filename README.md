# More than just 10^6 pixels

Димитър Мутафчиев, 80683

Крум Ангелов, 80673

Проект по WWW технологии, ФМИ

2015

Описание
--------
Уебсайтът е копие на популярния "The Million Dollar Homepage"(http://milliondollarhomepage.com/). Създаден е с цел реклама и дава възможност на клиентите си да закупят правото да разположат върху заглавната страница свое изображение с линк.

Функционалност
--------------
* преглед на основното изображение с всички реклами (линкове към клиента)
* детайли за определена реклама
* закупуване на правоъгълна площ от основното изображение и плащане за услугата чрез PayPal
* страница с новини за проекта
* администраторски панел за лесна връзка с базата данни

Обяснения
---------
Главната страница показва голямото изображение, съставено от всички реклами (ads) в базата данни. То е ``<map>`` елемент, а всяка реклама - ``<area>`` елемент с линк към рекламодателя.

Страницата за купуване на пиксели позволява избор на правоъгълен парцел и въвеждането на данни за рекламата. ``<canvas>`` елемент показва заетите места, както и наскоро резервираните (като сенки). Ако мястото е свободно, потребителят се пренасочва към PayPal, за да извърши плащането. Пикселите стоят резервирани (newads) за поне 1 час. При изплащане на сумата за услугата записът се прехвърля при останалите валидни реклами (ads). Двете стъпки се осъществяват като 2 транзакции към БД.

Страницата с новини предоставя списък на всички постове (blogposts), написани от администраторите. Всеки пост може да се отвори в отделна страница.

Администраторската страница, след логин (на предварително дефиниран потребител; по подразбиране има 1 в БД) предоставя форми за взаимодействие с БД - CRUD върху таблиците, както и смяна на парола. Данните се обменят чрез AJAX.

Всекидневно се изпълнява скриптът '/controllers/daily_pic_build.php' като задача (schedule) на сървъра. Той е отговорен за прерисуването на голямото изображение с всички реклами с всички актуални записи от БД.

Архитектура
-----------
Model-View-Controller (MVC):
* Модели - за работа със записи в БД и файлове
* Изгледи - за представяне на данните в подходящ формат върху страницата
* Контролери - за обработка на данните между моделите и изгледите

Инструкции
----------
Инсталира се обикновена уеб сървърна платформа (примерно: http://www.wampserver.com/en/). Проектът се копира в web root директорията. Отваря се '/models/config.php' и се въвеждат различни настройки (за връзка с MySQL БД, за връзка с PayPal акаунт, директории за съхраняване на качените файлове и др.). За периодичното ъпдейтване на основното изображение се създава задача (cron job / scheduled task) на ниво ОС, изпълняващ следната команда през определено време (примерно, 24h): 'php.exe {root_dir}/controllers/daily_pic_build.php {root_dir}'. Скриптът, създаващ схемата на БД, е в 'static/pixelsdb.sql'. Tрябва да се редактира и информацията за администратора (по подразбиране е username: admin, password: 123 в таблица users).
